1. Overview (بررسی کلی)
خلاصه: توسعه اپلیکیشن موبایل (Cross-Platform) با استفاده از فریم‌ورک Flutter برای سیستم Unipath. این کلاینت وظیفه دارد منطق پیچیده انتخاب واحد و پیشنیازها را در قالب یک رابط کاربری ساده، بصری و تعاملی به دانشجو و اساتید نمایش دهد.

بیانیه مشکل: سیستم‌های انتخاب واحد معمولاً دارای جداول پیچیده و گیج‌کننده هستند. کاربران در موبایل نمی‌توانند به راحتی ارتباط بین دروس (پیشنیاز/همنیاز) را درک کنند یا تداخل زمانی کلاس‌ها را در یک نگاه ببینند.

هدف: ایجاد یک رابط کاربری مدرن، واکنش‌گرا (Responsive) و کاربرپسند که فرآیند تصمیم‌گیری دانشجو را از طریق بصری‌سازی داده‌ها (Data Visualization) تسهیل کند.

2. Scope & Out of Scope (دایره شمول)
In Scope (در محدوده پروژه)
احراز هویت: صفحات لاگین، ثبت نام، فراموشی رمز عبور.

داشبورد: نمایش وضعیت کلی، معدل، واحدهای پاس شده و مانده.

نمایش چارت: نمایش لیست دروس با قابلیت فیلتر بر اساس ترم و وضعیت (پاس شده/نشده).

موتور پیشنهاد (UI): نمایش لیست هوشمند دروس پیشنهادی با ویجت‌های متمایز (Highlight) برای دروس با اولویت بالا.

برنامه هفتگی: پیاده‌سازی تقویم هفتگی (Time-Table) برای نمایش گرافیکی کلاس‌ها.

مدیریت پروفایل: ویرایش اطلاعات و مشاهده سوابق.

بومی‌سازی: پشتیبانی کامل از زبان فارسی (RTL) و فونت‌های استاندارد فارسی.

Out of Scope (خارج از محدوده این فاز)
پنل ادمین سنگین: مدیریت پیچیده چارت‌ها و ویرایش دیتابیس اصلی توسط ادمین ارشد (این بخش بهتر است در پنل وب جداگانه باشد؛ در اپلیکیشن فقط دسترسی‌های ضروری ادمین پیاده می‌شود).

انیمیشن‌های بسیار پیچیده: گراف‌های نود-لینک (Node-link diagrams) تعاملی سنگین (برای نسخه اول از لیست‌های درختی استفاده می‌شود).

3. User Personas & UI Flows (مسیرهای کاربری)
پرسوناها و نیازهای بصری
دانشجو: نیاز به سرعت دارد. باید سریع بفهمد "چه درسی را بردارم؟". رنگ‌ها باید وضعیت درس (مجاز/غیرمجاز) را فریاد بزنند.

استاد: نیاز به لیست ساده دانشجویان برای وارد کردن نمره دارد. فرم‌های ورودی نمره باید ساده و سریع باشند.

Use Cases (UI Perspective)
UC-UI-01: مشاهده مسیر تحصیلی (The Path)

صفحه: CourseChartScreen

جریان: کاربر لیست دروس را می‌بیند. دروس پاس شده "سبز"، دروس قابل اخذ "سفید" و دروس قفل شده (پیشنیاز پاس نشده) "خاکستری" و غیرفعال هستند.

تعامل: با کلیک روی هر درس، BottomSheet باز می‌شود که جزئیات پیشنیاز و همنیاز را نمایش می‌دهد.

UC-UI-02: چیدمان برنامه هفتگی

صفحه: WeeklyScheduleScreen

جریان: یک شبکه (Grid) که ستون‌ها روزهای هفته (شنبه تا پنجشنبه) و سطرها ساعات روز (۸ تا ۱۸) هستند.

تعامل: باکس‌های رنگی نشان‌دهنده کلاس‌ها هستند. اگر تداخل زمانی باشد، باکس‌ها به رنگ "قرمز" درآمده و روی هم قرار می‌گیرند (Overlapping).

UC-UI-03: ورود نمرات (پنل استاد)

صفحه: ProfessorGradeEntryScreen

جریان: لیست دانشجویان یک کلاس. جلوی نام هر دانشجو یک فیلد عددی وجود دارد.

حالت خطا: اگر نمره خارج از ۰-۲۰ باشد، فیلد قرمز می‌شود.

4. Functional Requirements (Frontend Logic)
FR-FE-1 (State Management): اپلیکیشن باید از یک روش مدیریت حالت مقیاس‌پذیر (مانند BLoC یا Riverpod) استفاده کند تا تغییرات در وضعیت یک درس (مثلاً پاس شدن)، بلافاصله در تمام صفحات (چارت، پیشنهاد، پروفایل) اعمال شود.

FR-FE-2 (Local Storage): توکن احراز هویت (JWT) باید در Flutter_Secure_Storage ذخیره شود تا لاگین کاربر حفظ شود.

FR-FE-3 (Connectivity): مدیریت وضعیت‌های قطع اینترنت (Offline Mode) و نمایش پیام مناسب (Snackbar) در صورت شکست درخواست‌های API.

FR-FE-4 (Form Validation): تمامی فرم‌ها (ثبت نام، نمره) باید در سمت کلاینت اعتبارسنجی شوند (مثلاً فرمت ایمیل، خالی نبودن فیلدها).

FR-FE-5 (Dynamic Theming): قابلیت تغییر تم (لایت/دارک) بر اساس تنظیمات سیستم عامل.

5. UI/UX & Design System Requirements
5.1. زبان طراحی (Design Language)
سبک: Material Design 3 (Google).

تایپوگرافی: استفاده از فونت‌های خوانای فارسی مثل Vazirmatn یا Yekan Bakh. اعداد باید حتماً فارسی نمایش داده شوند.

جهت: تمام لی‌آوت‌ها باید به صورت پیش‌فرض RTL (راست‌چین) باشند.

5.2. پالت رنگی (Color Palette)
Primary (اصلی): سرمه‌ای دانشگاهی (Academic Blue) - حس اعتماد و رسمی بودن.

Secondary (ثانویه): نارنجی ملایم - برای دکمه‌های اقدام (Call to Action) مثل "انتخاب واحد".

Status Colors:

Success (پاس شده): سبز یشمی.

Error/Conflict (تداخل/مشروط): قرمز روشن.

Warning (پیشنهاد شده/مهم): زرد کهربایی.

Disabled (قفل شده): خاکستری روشن.

5.3. کامپوننت‌های کلیدی
Course Card: کارتی شامل نام درس، کد، تعداد واحد و یک "Badge" کوچک برای وضعیت (پیشنیاز/عادی).

Conflict Alert: یک بنر چسبان (Sticky Banner) در بالای صفحه برنامه هفتگی که در صورت تداخل ظاهر می‌شود.

6. Integration & API Consumption
Networking Client: استفاده از پکیج Dio برای مدیریت درخواست‌های HTTP.

Interceptors: پیاده‌سازی Interceptor برای افزودن خودکار توکن Authorization: Bearer به هدر تمام درخواست‌ها.

Error Handling: مدیریت کدهای خطای استاندارد:

401 Unauthorized: هدایت خودکار به صفحه لاگین.

400 Bad Request: نمایش پیام خطا (Toast) به کاربر.

500 Server Error: نمایش صفحه "مشکل در ارتباط با سرور".

7. Analytics & Success Metrics (Frontend)
Crash Free Users: درصد کاربرانی که بدون کرش (Crash) از برنامه استفاده می‌کنند (مانیتورینگ با Sentry یا Firebase Crashlytics).

App Load Time: زمان بالا آمدن اولیه اپلیکیشن (باید زیر ۲ ثانیه باشد).

UI Freeze: نرخ فریم (FPS) در هنگام اسکرول لیست‌های طولانی دروس (باید روی ۶۰fps ثابت باشد).

8. Risks & Open Questions
ریسک: نمایش چارت‌های بزرگ. اگر یک رشته ۱۰۰ درس داشته باشد، نمایش همه در یک لیست ممکن است کاربر را گیج کند.

راه حل: استفاده از "Expandable Lists" (لیست‌های بازشو) که دروس را بر اساس ترم‌بندی دسته‌بندی می‌کند.

ریسک: سایز صفحه نمایش. نمایش برنامه هفتگی (جدول) در گوشی‌های کوچک (iPhone SE یا مدل‌های قدیمی اندروید) ممکن است خوانا نباشد.

راه حل: قابلیت زوم (Pinch to Zoom) یا اسکرول افقی برای جدول زمانی.

9. Acceptance Criteria (Frontend)
پروژه فرانت‌اند زمانی "تکمیل" است که:

کاربر بتواند فایل APK/IPA را نصب و اجرا کند.

فونت‌ها و چیدمان فارسی در تمام صفحات (حتی در حالت Landscape) صحیح باشد.

کاربر بتواند با زدن تیک "پاس شد" روی درس ریاضی ۱، بلافاصله درس ریاضی ۲ را از حالت "قفل" به حالت "قابل انتخاب" ببیند (بدون نیاز به رفرش دستی).

جدول هفتگی در موبایل‌های با عرض کم اسکرول افقی داشته باشد و بهم نریزد.

اپلیکیشن در هنگام قطع اینترنت کرش نکند و آخرین داده‌های کش شده (در صورت وجود) یا پیام "عدم اتصال" را نشان دهد.